<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ch√∫c M·ª´ng Sinh Nh·∫≠t Em Y√™u</title>
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #0f001a, #1a0033, #330066);
            color: #fff;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            overflow: hidden;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #canvas {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 1;
            pointer-events: none;
        }
        .container {
            position: relative;
            z-index: 10;
            text-align: center;
            padding: 4vw 5vw;
            max-width: 95%;
            width: 100%;
        }
        h1 {
            color: #ff69b4;
            font-size: clamp(2.5rem, 8vw, 4.5rem);
            text-shadow: 0 0 20px #ff1493, 0 0 40px #c2185b;
            margin: 2vh 0;
            cursor: pointer;
        }
        .subtitle {
            font-size: clamp(1.2rem, 4vw, 1.8rem);
            color: #ff99cc;
            margin-bottom: 5vh;
        }
        .cake {
            font-size: clamp(8rem, 25vw, 14rem);
            margin: 3vh 0;
            animation: beat 2s infinite;
            cursor: pointer;
            display: inline-block;
        }
        @keyframes beat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.12); }
        }
        p.final {
            font-size: clamp(1.2rem, 4vw, 1.6rem);
            margin-top: 6vh;
            color: #ffb6c1;
        }
        /* N√∫t √¢m thanh responsive */
        #musicToggle {
            position: fixed;
            top: 2vh;
            right: 2vw;
            z-index: 100;
            background: rgba(255, 105, 180, 0.7);
            border: none;
            border-radius: 50%;
            width: clamp(45px, 10vw, 60px);
            height: clamp(45px, 10vw, 60px);
            font-size: clamp(1.5rem, 5vw, 2rem);
            color: white;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(255, 105, 180, 0.5);
            transition: all 0.3s;
        }
        #musicToggle:hover {
            transform: scale(1.1);
            background: #ff69b4;
        }
        /* Popup Modal responsive */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.6);
            backdrop-filter: blur(5px);
        }
        .modal-content {
            background: rgba(255, 105, 180, 0.15);
            backdrop-filter: blur(15px);
            margin: 8vh auto;
            padding: 5vw;
            border: 2px solid #ff69b4;
            width: 90%;
            max-width: 700px;
            border-radius: 25px;
            box-shadow: 0 0 40px rgba(255, 105, 180, 0.6);
            text-align: center;
            color: #fff;
            animation: fadeIn 0.8s;
        }
        @keyframes fadeIn {
            from {opacity: 0; transform: scale(0.85);}
            to {opacity: 1; transform: scale(1);}
        }
        .close {
            color: #ff69b4;
            float: right;
            font-size: clamp(2.5rem, 8vw, 3.5rem);
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
        }
        .close:hover {
            color: #fff;
        }
        .modal h2 {
            color: #ff3366;
            font-size: clamp(2rem, 6vw, 3rem);
            margin: 3vh 0;
            text-shadow: 0 0 15px #ff1493;
        }
        .modal .message {
            font-size: clamp(1.1rem, 3.5vw, 1.4rem);
            line-height: 1.7;
            margin: 3vh 0;
        }
        .heart {
            color: #ff3366;
            font-size: clamp(1.5rem, 5vw, 2rem);
        }

        /* Media queries cho m√†n h√¨nh nh·ªè */
        @media (max-width: 600px) {
            .container { padding: 5vw 4vw; }
            .cake { margin: 4vh 0; }
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>

    <!-- Nh·∫°c n·ªÅn -->
    <audio id="bgMusic" loop>
        <source src="https://cdn.pixabay.com/download/audio/2025/12/21/audio_8932415a99.mp3?filename=moodmode-happy-birthday-song-455067.mp3" type="audio/mpeg">
        Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ audio.
    </audio>

    <!-- N√∫t b·∫≠t/t·∫Øt nh·∫°c -->
    <button id="musicToggle" onclick="toggleMusic()">üîá</button>

    <div class="container">
        <h1 onclick="shootConfetti()">Ch√∫c M·ª´ng Sinh Nh·∫≠t Em Y√™u üéÇüíï</h1>
        
        <div class="cake" onclick="openPopup()">üéÇ</div>
        
        <p class="final">Nh·∫•n v√†o b√°nh kem ƒë·ªÉ m·ªü nh√© em y√™u! üíñüéâ</p>
    </div>

    <!-- Popup Modal -->
    <div id="wishModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closePopup()">&times;</span>
            <h2>Em Y√™u C·ªßa Anh‚ù§Ô∏è</h2>
            <div class="message">
                H√¥m nay l√† ng√†y em ch√†o ƒë·ªùi, c≈©ng l√† ng√†y ƒë·ªãnh m·ªánh ch√∫ng ta quen nhau ‚Äì hai kho·∫£nh kh·∫Øc ƒë·∫πp nh·∫•t ƒë·ªùi anh.<br><br>
                
                Anh ch√∫c em tu·ªïi m·ªõi tr√†n ƒë·∫ßy ni·ªÅm vui, s·ª©c kh·ªèe d·ªìi d√†o, lu√¥n xinh ƒë·∫πp r·∫°ng ng·ªùi nh∆∞ n·ª• c∆∞·ªùi em d√†nh cho anh m·ªói ng√†y.<br>
                C·∫£m ∆°n em v√¨ ƒë√£ l√† √°nh s√°ng, l√† h·∫°nh ph√∫c l·ªõn nh·∫•t trong cu·ªôc ƒë·ªùi anh.<br><br>
                
                Th·ªùi gian tr√¥i nhanh, nh∆∞ng t√¨nh y√™u anh d√†nh cho em v·∫´n v·∫πn nguy√™n: h·ªìi h·ªôp, ng·ªçt ng√†o v√† ch√¢n th√†nh nh∆∞ ng√†y ƒë·∫ßu.<br>
                Anh s·∫Ω m√£i b√™n em, n·∫Øm ch·∫∑t tay nhau qua m·ªçi ch·∫∑ng ƒë∆∞·ªùng, g·ªçi em l√† "em y√™u" m·ªói ng√†y.<br><br>
                
                Y√™u em nhi·ªÅu l·∫Øm, nhi·ªÅu h∆°n c·∫£ nh·ªØng v√¨ sao tr√™n b·∫ßu tr·ªùi ƒë√™m nay! üíóüåü
            </div>
            <p class="heart">M√£i m√£i b√™n em nh√©! ‚ù§Ô∏è</p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

    <script>
        const music = document.getElementById('bgMusic');
        const toggleBtn = document.getElementById('musicToggle');
        let isPlaying = false;

        function toggleMusic() {
            if (isPlaying) {
                music.pause();
                toggleBtn.textContent = 'üîá';
            } else {
                music.volume = 0.4;
                music.play().catch(() => console.log("Auto-play b·ªã ch·∫∑n"));
                toggleBtn.textContent = 'üéµ';
            }
            isPlaying = !isPlaying;
        }

        function shootConfetti() {
            const isMobile = window.innerWidth < 768;
            confetti({
                particleCount: isMobile ? 80 : 120,
                spread: 70,
                origin: { y: 0.6 },
                colors: ['#ff69b4', '#ff3366', '#c2185b', '#e91e63', '#f06292', '#ffb6c1', '#ffffff'],
                ticks: 300
            });
        }

        function shootConfettiBig() {
            const isMobile = window.innerWidth < 768;
            const count = isMobile ? 150 : 250;
            const defaults = { origin: { y: 0.6 } };

            function fire(ratio, opts) {
                confetti({
                    ...defaults,
                    ...opts,
                    particleCount: Math.floor(count * ratio),
                    colors: ['#ff0', '#f00', '#0f0', '#00f', '#ff69b4', '#ff1493', '#c2185b', '#ffffff']
                });
            }

            fire(0.25, { spread: 26, startVelocity: 55 });
            fire(0.2, { spread: 60 });
            fire(0.35, { spread: 100, decay: 0.91, scalar: 0.8 });
            fire(0.1, { spread: 120, startVelocity: 25, decay: 0.92 });
        }

        function startConfettiRain() {
            const duration = 8000;
            const end = Date.now() + duration;
            const isMobile = window.innerWidth < 768;
            const interval = setInterval(() => {
                if (Date.now() > end) {
                    clearInterval(interval);
                    return;
                }
                confetti({
                    particleCount: isMobile ? 3 : 6,
                    angle: 90,
                    spread: 45,
                    startVelocity: 0,
                    origin: { x: Math.random(), y: -0.1 },
                    gravity: 0.6,
                    drift: Math.random() * 1 - 0.5,
                    ticks: 250,
                    scalar: 0.8,
                    colors: ['#ff69b4', '#ff3366', '#ffb6c1', '#ffffff', '#ff1493']
                });
            }, isMobile ? 600 : 400);
        }

        function openPopup() {
            document.getElementById('wishModal').style.display = "block";
            shootConfettiBig();
            startConfettiRain();
            if (!isPlaying) {
                toggleMusic();
            }
        }

        function closePopup() {
            document.getElementById('wishModal').style.display = "none";
            shootConfettiBig();
            startConfettiRain();
        }

        window.onclick = function(event) {
            const modal = document.getElementById('wishModal');
            if (event.target == modal) {
                closePopup();
            }
        }

        // Responsive canvas confetti (t·ª± resize khi thay ƒë·ªïi k√≠ch th∆∞·ªõc m√†n h√¨nh)
        function resizeCanvas() {
            const canvas = document.getElementById('canvas');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas(); // G·ªçi l·∫ßn ƒë·∫ßu

        // Confetti nh·∫π khi load
        window.onload = () => {
            setTimeout(shootConfetti, 800);
        };
    </script>
</body>
</html>
